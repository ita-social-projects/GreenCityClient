<div class="container mb-3">
  <div class="empty_card" (click)="openDetails()">
    <img *ngIf="!pageOpen" src="assets/img/ubs-admin-orders/arrow_up.svg" alt="arrow up" />
    <img *ngIf="pageOpen" src="assets/img/ubs-admin-orders/arrow_down.svg" alt="arrow down" />
    <h1 class="form__headline py-3">{{ 'address-details.title' | translate }}</h1>
  </div>
  <form *ngIf="pageOpen" [formGroup]="addressExportDetailsDto">
    <div class="form-row">
      <div class="address">
        <div class="settlement">
          <div class="form-group">
            <label for="region">{{ 'address-details.region' | translate }}</label>
            <select
              formControlName="{{ currentLanguage === 'ua' ? 'addressRegion' : 'addressRegionEng' }}"
              (change)="setRegionValue($event)"
              class="shadow-none form-control"
              id="region"
            >
              <option *ngFor="let region of regions" [ngValue]="region.name">{{ region.name }}</option>
            </select>
          </div>
          <div class="form-group">
            <label for="settlement">{{ 'address-details.settlement' | translate }}</label>
            <input
              type="text"
              (keyup)="setPredictCities()"
              formControlName="{{ currentLanguage === 'ua' ? 'addressCity' : 'addressCityEng' }}"
              class="form-control"
              id="settlement"
              matInput
              [matAutocomplete]="autoCity"
            />
            <mat-autocomplete #autoCity="matAutocomplete">
              <mat-option
                class="autocomplete-dropdown"
                *ngFor="let cityName of cityPredictionList"
                [value]="cityName.description"
                (click)="onCitySelected(cityName)"
              >
                {{ cityName.description }}
              </mat-option>
            </mat-autocomplete>
            <div
              class="validation"
              *ngIf="
                (currentLanguage === 'ua' ? addressCity : addressCityEng).invalid &&
                (currentLanguage === 'ua' ? addressCity : addressCityEng).touched
              "
            >
              <app-ubs-input-error
                [formElement]="currentLanguage === 'ua' ? addressCity : addressCityEng"
                [controlName]="currentLanguage === 'ua' ? 'addressCity' : 'addressCityEng'"
              ></app-ubs-input-error>
            </div>
          </div>
        </div>

        <div class="settlement">
          <div class="form-group">
            <label for="street">{{ 'address-details.street' | translate }}</label>
            <input
              (keyup)="setPredictStreets()"
              type="text"
              class="form-control"
              id="street"
              formControlName="{{ currentLanguage === 'ua' ? 'addressStreet' : 'addressStreetEng' }}"
              matInput
              [matAutocomplete]="autoStreet"
            />
            <mat-autocomplete #autoStreet="matAutocomplete">
              <mat-option
                class="autocomplete-dropdown"
                *ngFor="let streetName of streetPredictionList"
                [value]="streetName.description"
                (click)="onStreetSelected(streetName)"
              >
                {{ streetName.description }}
              </mat-option>
            </mat-autocomplete>
            <div
              class="validation"
              *ngIf="
                (currentLanguage === 'ua' ? addressStreet : addressStreetEng).invalid &&
                (currentLanguage === 'ua' ? addressStreet : addressStreetEng).touched
              "
            >
              <app-ubs-input-error
                [formElement]="currentLanguage === 'ua' ? addressStreet : addressStreetEng"
                [controlName]="currentLanguage === 'ua' ? 'addressStreet' : 'addressStreetEng'"
              >
              </app-ubs-input-error>
            </div>
          </div>
          <div class="building">
            <div class="form-group">
              <label for="building">{{ 'address-details.building' | translate }}</label>
              <input type="text" class="form-control" id="building" formControlName="addressHouseNumber" />
              <div class="validation" *ngIf="addressHouseNumber.invalid && addressHouseNumber.touched">
                <app-ubs-input-error [formElement]="addressHouseNumber" [controlName]="'addressHouseNumber'"></app-ubs-input-error>
              </div>
            </div>
            <div class="form-group">
              <label for="corpus">{{ 'address-details.corpus' | translate }}</label>
              <input type="text" class="form-control" id="corpus" formControlName="addressHouseCorpus" />
              <div class="validation" *ngIf="addressHouseCorpus.invalid && addressHouseCorpus.touched">
                <app-ubs-input-error [formElement]="addressHouseCorpus" [controlName]="'addressHouseCorpus'"></app-ubs-input-error>
              </div>
            </div>
            <div class="form-group">
              <label for="entrance">{{ 'address-details.entrance' | translate }}</label>
              <input formControlName="addressEntranceNumber" type="text" class="form-control" id="entrance" />
              <div class="validation" *ngIf="addressEntranceNumber.invalid && addressEntranceNumber.touched">
                <app-ubs-input-error [formElement]="addressEntranceNumber" [controlName]="'addressEntranceNumber'"></app-ubs-input-error>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group district">
          <label for="district">{{ 'address-details.district' | translate }}</label>
          <select
            *ngIf="isDistrict"
            id="district"
            formControlName="{{ currentLanguage === 'ua' ? 'addressDistrict' : 'addressDistrictEng' }}"
            class="form-control"
            (change)="onDistrictSelected($event)"
          >
            <option *ngFor="let district of districtsKyiv" [ngValue]="district.name">{{ district.name }}</option>
          </select>
          <select
            *ngIf="!isDistrict"
            id="district"
            formControlName="{{ currentLanguage === 'ua' ? 'addressDistrict' : 'addressDistrictEng' }}"
            class="form-control"
            (change)="onDistrictSelected($event)"
          >
            <option *ngFor="let district of districts" [ngValue]="district.name">
              {{ district.name }}
            </option>
          </select>
          <div
            class="validation"
            *ngIf="
              (currentLanguage === 'ua' ? addressDistrict : addressDistrictEng).invalid &&
              (currentLanguage === 'ua' ? addressDistrict : addressDistrictEng).touched
            "
          >
            <app-ubs-input-error
              [formElement]="currentLanguage === 'ua' ? addressDistrict : addressDistrictEng"
              [controlName]="currentLanguage === 'ua' ? 'addressDistrict' : 'addressDistrictEng'"
            ></app-ubs-input-error>
          </div>
        </div>
      </div>
      <div class="form-group comment">
        <label for="address-comment">{{ 'address-details.comment-label' | translate }}</label>
        <textarea class="form-control" id="address-comment" rows="3" placeholder="{{ addressComment }}" disabled></textarea>
      </div>
    </div>
  </form>
  <hr />
</div>
